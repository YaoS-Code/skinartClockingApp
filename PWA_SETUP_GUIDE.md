# PWA 手机支持指南 📱

## ✅ 已配置完成

您的打卡应用现在已经是一个**渐进式Web应用（PWA）**，员工可以将它添加到手机主屏幕，像原生 App 一样使用！

## 🎯 PWA 优势

- ✅ **无需安装** - 不用从 App Store 或 Google Play 下载
- ✅ **自动更新** - 每次打开自动获取最新版本
- ✅ **离线支持** - 基础界面可在离线时访问
- ✅ **原生体验** - 全屏显示，没有浏览器地址栏
- ✅ **省空间** - 比原生 App 占用空间小
- ✅ **跨平台** - iOS 和 Android 都支持

## 📱 iOS (iPhone/iPad) 安装步骤

### 1. 使用 Safari 浏览器访问

**重要**：必须使用 **Safari**，Chrome 不支持 PWA 安装

```
https://clock.skinartmd.ca
```

### 2. 添加到主屏幕

1. 点击底部中间的 **分享按钮** (⎋ 图标)
2. 向下滚动，找到 **"添加到主屏幕"**（Add to Home Screen）
3. 点击 **"添加到主屏幕"**
4. 编辑名称（默认：SkinartMD Clock）
5. 点击右上角 **"添加"**（Add）

### 3. 完成！

- 主屏幕上会出现 **SkinartMD Clock** 图标
- 点击图标启动应用
- 应用会全屏显示，像原生 App 一样

### iOS 视觉效果

```
┌─────────────────────┐
│  < Safari  ⎋  ≡    │
│                     │
│  https://clock...   │
├─────────────────────┤
│                     │
│   SkinartMD Clock   │
│                     │
└─────────────────────┘
        ↓
   点击 ⎋ 分享
        ↓
┌─────────────────────┐
│  分享选项            │
│  ┌─────┬─────┬─────┐│
│  │信息 │备忘录│邮件 ││
│  └─────┴─────┴─────┘│
│                     │
│  📱 添加到主屏幕     │  ← 点击这里
│  🔖 添加到书签       │
│  📄 添加到阅读列表   │
└─────────────────────┘
```

## 🤖 Android 安装步骤

### 方法 1：Chrome 浏览器

1. 使用 **Chrome** 访问：`https://clock.skinartmd.ca`
2. 点击右上角 **⋮** (三个点)
3. 选择 **"添加到主屏幕"** 或 **"安装应用"**
4. 在弹出对话框中点击 **"添加"** 或 **"安装"**
5. 应用图标会出现在主屏幕或应用抽屉

### 方法 2：自动提示

Chrome 可能会自动显示底部横幅：

```
┌──────────────────────────────┐
│  安装 SkinartMD Clock?        │
│  [取消]          [安装]      │
└──────────────────────────────┘
```

直接点击 **"安装"**

### Android 视觉效果

```
主屏幕
┌─────┬─────┬─────┬─────┐
│ 📞  │ 📧  │ 🏠  │ ⚙️  │
│电话  │信息  │浏览器│设置  │
├─────┼─────┼─────┼─────┤
│ 📱  │ 📷  │ 🎵  │ 🕐  │
│Skin │相机  │音乐  │时钟  │
│artMD│     │     │     │
│Clock│     │     │     │  ← 新增的图标
└─────┴─────┴─────┴─────┘
```

## 🧪 测试 PWA 功能

### 确认安装成功

✅ **iOS**:
- 主屏幕有图标
- 点击后全屏显示（无 Safari 地址栏）
- 顶部状态栏颜色为蓝色

✅ **Android**:
- 应用抽屉或主屏幕有图标
- 启动时有启动画面（splash screen）
- 顶部状态栏颜色为蓝色

### 测试位置功能

1. 首次打开会请求位置权限
2. 点击 **"允许"** 或 **"Allow"**
3. 在诊所内应该看到绿色成功提示
4. Clock In 按钮应该可用

## 🔧 常见问题

### Q1: iOS 上找不到"添加到主屏幕"？

**A**: 确保使用的是 **Safari 浏览器**，不是 Chrome。
- Chrome iOS 版本不支持 PWA 安装
- 必须使用 Safari

### Q2: Android 上没有"安装应用"选项？

**A**: 
1. 确认使用的是 **Chrome 浏览器**（最新版本）
2. 确认访问的是 **HTTPS** (https://clock.skinartmd.ca)
3. 尝试刷新页面（下拉刷新）

### Q3: 安装后图标是默认的，不是自定义的？

**A**: 
- 图标会在几分钟后更新
- 尝试重启手机
- 或删除后重新安装

### Q4: 打开后还是显示浏览器地址栏？

**A**: 
- 确认是从主屏幕图标启动，不是从浏览器打开
- iOS：必须通过 Safari 的"添加到主屏幕"功能
- Android：必须通过 Chrome 的"安装应用"功能

### Q5: 位置功能不工作？

**A**: 
1. 确认已授予位置权限
2. **iOS**: 设置 → 隐私 → 定位服务 → Safari 网站 → 允许
3. **Android**: 设置 → 应用 → Chrome → 权限 → 位置 → 允许

### Q6: 如何更新应用？

**A**: 
- PWA 会自动更新
- 每次打开应用时自动检查更新
- 无需手动操作

### Q7: 如何卸载？

**A**: 
- **iOS**: 长按图标 → 删除 App
- **Android**: 长按图标 → 卸载 或 应用信息 → 卸载

## 📊 功能对比

| 功能 | iOS Safari PWA | Android Chrome PWA | 原生 App |
|------|---------------|-------------------|----------|
| 全屏显示 | ✅ | ✅ | ✅ |
| 主屏幕图标 | ✅ | ✅ | ✅ |
| 离线支持 | ✅ | ✅ | ✅ |
| GPS 定位 | ✅ | ✅ | ✅ |
| 推送通知 | ❌ | ✅ | ✅ |
| 自动更新 | ✅ | ✅ | ⚠️ 需手动 |
| 占用空间 | 小 | 小 | 大 |

## 💡 使用技巧

### 1. 最佳实践

- **在诊所 Wi-Fi 下首次安装**：确保所有资源正确缓存
- **允许位置权限**：打卡功能必需
- **不要删除浏览器缓存**：会清除 PWA 缓存

### 2. 离线功能

PWA 支持基础离线访问：
- ✅ 可以打开应用
- ✅ 可以看到登录界面
- ❌ 无法登录（需要网络）
- ❌ 无法打卡（需要网络和GPS）

### 3. 性能优化

- 首次加载可能需要几秒
- 后续打开会很快（使用缓存）
- 建议在诊所 Wi-Fi 下使用

## 📱 员工培训建议

### 培训步骤

1. **演示安装**：
   - 在员工面前演示一次完整安装过程
   - iOS 和 Android 分别演示

2. **测试打卡**：
   - 让员工在诊所内测试打卡
   - 确认位置功能正常

3. **解答疑问**：
   - 回答员工的问题
   - 提供本文档供参考

### 培训清单

- [ ] 如何访问应用 (https://clock.skinartmd.ca)
- [ ] 如何添加到主屏幕
- [ ] 如何允许位置权限
- [ ] 如何登录 (用户名/密码)
- [ ] 如何打卡 (Clock In/Out)
- [ ] 如何查看记录
- [ ] 遇到问题找谁

## 🎨 自定义图标（可选）

如果您想更换应用图标：

1. 准备图标文件（PNG 格式）：
   - `logo192.png` (192x192 像素)
   - `logo512.png` (512x512 像素)

2. 替换文件：
   ```bash
   /Users/yaosong/Apps/skinartClockingApp/client/public/logo192.png
   /Users/yaosong/Apps/skinartClockingApp/client/public/logo512.png
   ```

3. 重新构建：
   ```bash
   cd /Users/yaosong/Apps/skinartClockingApp
   docker-compose up -d --build client
   ```

## 📞 技术支持

如果员工遇到安装或使用问题：

1. 检查是否使用正确浏览器（iOS 用 Safari，Android 用 Chrome）
2. 确认访问的是 HTTPS 地址
3. 尝试清除浏览器缓存后重新安装
4. 确认手机系统版本不是太旧
   - iOS 最低：iOS 11.3+
   - Android 最低：Android 5.0+

## ✨ 部署完成

PWA 功能现在已经完全配置好了！

### 下一步

1. **自己测试**：在 iPhone 和 Android 上安装并测试
2. **员工培训**：教员工如何安装和使用
3. **收集反馈**：了解员工使用体验
4. **持续改进**：根据反馈优化

---

**更新时间**: 2025年10月31日  
**支持平台**: iOS 11.3+ & Android 5.0+  
**访问地址**: https://clock.skinartmd.ca

