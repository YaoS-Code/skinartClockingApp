# 直接访问配置说明（无 Nginx）

## 📋 配置总结

已移除 Nginx 反向代理，改为直接访问前端和后端服务。

## 🔧 服务端口

- **前端**: `http://<your-ip>:3001`
- **后端API**: `http://<your-ip>:13000/api`

## 🌐 访问方式

### 通过局域网 IP 访问
```
前端: http://192.168.1.96:3001
后端API: http://192.168.1.96:13000/api
```

### 通过 Tailscale IP 访问
```
前端: http://100.78.69.23:3001
后端API: http://100.78.69.23:13000/api
```

### 通过 localhost 访问
```
前端: http://localhost:3001
后端API: http://localhost:13000/api
```

### 通过域名访问（需配置 hosts）
```
前端: http://clock.skinartmd.ca:3001
后端API: http://clock.skinartmd.ca:13000/api
```

## ⚡ 工作原理

前端会**自动检测**当前访问的地址，并动态构建 API URL：
- 如果通过 `http://100.78.69.23:3001` 访问，前端会自动使用 `http://100.78.69.23:13000/api`
- 如果通过 `http://localhost:3001` 访问，前端会自动使用 `http://localhost:13000/api`
- 如果通过 `http://192.168.1.96:3001` 访问，前端会自动使用 `http://192.168.1.96:13000/api`

**无需手动配置**，无论通过什么地址访问都能正常工作！

## ✅ 已完成的配置

1. ✅ 移除了 Nginx 服务
2. ✅ 前端直接暴露端口 3001
3. ✅ 后端直接暴露端口 13000
4. ✅ 前端自动检测并构建 API URL
5. ✅ 更新了 CORS 配置支持所有访问方式

## 🔒 安全设置

- ✅ IP 白名单已启用，仅允许私有IP（局域网IP）访问后端
- ✅ CORS 配置支持所有前端访问方式
- ✅ 注册和登录路由为公开路由，不受 IP 限制

## 🚀 启动服务

```bash
cd /Users/yaosong/Apps/skinartClockingApp
docker-compose up -d --build
```

## 📝 注意事项

1. **端口占用**: 确保 3001 和 13000 端口未被其他程序占用
2. **防火墙**: 确保防火墙允许访问这些端口
3. **IP 白名单**: 后端只允许局域网 IP 访问，Tailscale IP 会被拒绝（这是安全设计）
4. **前端访问**: 前端可以通过任何 IP 访问，但 API 调用需要符合 CORS 和 IP 白名单规则

